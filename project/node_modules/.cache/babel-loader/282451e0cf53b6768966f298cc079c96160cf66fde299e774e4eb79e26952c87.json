{"ast":null,"code":"import { logger } from './Logger';\nconst storage = {\n  urls: JSON.parse(localStorage.getItem('shortenedUrls')) || [],\n  save() {\n    localStorage.setItem('shortenedUrls', JSON.stringify(this.urls));\n  }\n};\nexport const validateURL = url => {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n};\nexport const generateShortCode = () => {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let code = '';\n  for (let i = 0; i < 6; i++) {\n    code += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  if (storage.urls.some(u => u.shortCode === code)) {\n    return generateShortCode();\n  }\n  return code;\n};\nexport const storeURL = async (longUrl, validityMinutes, shortCode) => {\n  if (storage.urls.some(u => u.shortCode === shortCode)) {\n    throw new Error(`Shortcode ${shortCode} is already in use`);\n  }\n  const createdAt = new Date();\n  const expiry = new Date(createdAt.getTime() + validityMinutes * 60 * 1000);\n  const urlEntry = {\n    longUrl,\n    shortCode,\n    createdAt: createdAt.toISOString(),\n    expiry: expiry.toISOString(),\n    clicks: []\n  };\n  storage.urls.push(urlEntry);\n  storage.save();\n  logger.info('Stored new URL', {\n    shortCode,\n    longUrl,\n    validityMinutes\n  });\n  return urlEntry;\n};\nexport const getURLs = () => {\n  storage.urls = storage.urls.filter(url => new Date(url.expiry) > new Date());\n  storage.save();\n  return storage.urls;\n};\nexport const recordClick = (shortCode, source = 'unknown', location = 'unknown') => {\n  const url = storage.urls.find(u => u.shortCode === shortCode);\n  if (url && new Date(url.expiry) > new Date()) {\n    url.clicks.push({\n      timestamp: new Date().toISOString(),\n      source,\n      location\n    });\n    storage.save();\n    logger.info('Recorded click', {\n      shortCode,\n      source,\n      location\n    });\n  }\n};\nexport const getURLByShortCode = shortCode => {\n  const url = storage.urls.find(u => u.shortCode === shortCode);\n  if (url && new Date(url.expiry) > new Date()) {\n    return url;\n  }\n  return null;\n};","map":{"version":3,"names":["logger","storage","urls","JSON","parse","localStorage","getItem","save","setItem","stringify","validateURL","url","URL","generateShortCode","chars","code","i","charAt","Math","floor","random","length","some","u","shortCode","storeURL","longUrl","validityMinutes","Error","createdAt","Date","expiry","getTime","urlEntry","toISOString","clicks","push","info","getURLs","filter","recordClick","source","location","find","timestamp","getURLByShortCode"],"sources":["/home/admin/Desktop/22331A0568/Frontend_Test_Submission/src/utils/helpers.js"],"sourcesContent":["import { logger } from './Logger';\n\nconst storage = {\n  urls: JSON.parse(localStorage.getItem('shortenedUrls')) || [],\n  save() {\n    localStorage.setItem('shortenedUrls', JSON.stringify(this.urls));\n  },\n};\n\nexport const validateURL = (url) => {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n};\n\nexport const generateShortCode = () => {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let code = '';\n  for (let i = 0; i < 6; i++) {\n    code += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  if (storage.urls.some((u) => u.shortCode === code)) {\n    return generateShortCode();\n  }\n  return code;\n};\n\nexport const storeURL = async (longUrl, validityMinutes, shortCode) => {\n  if (storage.urls.some((u) => u.shortCode === shortCode)) {\n    throw new Error(`Shortcode ${shortCode} is already in use`);\n  }\n\n  const createdAt = new Date();\n  const expiry = new Date(createdAt.getTime() + validityMinutes * 60 * 1000);\n  const urlEntry = {\n    longUrl,\n    shortCode,\n    createdAt: createdAt.toISOString(),\n    expiry: expiry.toISOString(),\n    clicks: [],\n  };\n\n  storage.urls.push(urlEntry);\n  storage.save();\n  logger.info('Stored new URL', { shortCode, longUrl, validityMinutes });\n  return urlEntry;\n};\n\nexport const getURLs = () => {\n  storage.urls = storage.urls.filter((url) => new Date(url.expiry) > new Date());\n  storage.save();\n  return storage.urls;\n};\n\nexport const recordClick = (shortCode, source = 'unknown', location = 'unknown') => {\n  const url = storage.urls.find((u) => u.shortCode === shortCode);\n  if (url && new Date(url.expiry) > new Date()) {\n    url.clicks.push({\n      timestamp: new Date().toISOString(),\n      source,\n      location,\n    });\n    storage.save();\n    logger.info('Recorded click', { shortCode, source, location });\n  }\n};\n\nexport const getURLByShortCode = (shortCode) => {\n  const url = storage.urls.find((u) => u.shortCode === shortCode);\n  if (url && new Date(url.expiry) > new Date()) {\n    return url;\n  }\n  return null;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}